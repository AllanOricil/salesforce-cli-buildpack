#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir> <env-dir>

START_TIME=$SECONDS

set -x            # debug every command
set -o errexit    # always exit on error
set -o pipefail   # don't ignore exit codes when piping output
# set -o nounset    # fail on unset variables
# unset GIT_DIR     # Avoid GIT_DIR leak from previous build steps

### Configure directories
BUILD_DIR=${1:-}
CACHE_DIR=${2:-}
ENV_DIR=${3:-}
BP_DIR=$(cd $(dirname ${0:-}); cd ..; pwd)

# export_env_dir

WHOAMI=$(whoami)
PATH=$(pwd)
echo ""
echo "-----> Welcome to sfdx-buildpack!"
echo ""
echo "-----> Run install command for Salesforce CLI"
# "./sfdx/install"
echo ""

# CLI_PATH="/app/cli/sfdx"

# echo "-----> Set path for Salesforce CLI ($CLI_PATH)"
# export PATH=$CLI_PATH:$PATH

# LS=$(ls -l $CLI_PATH)
# echo "-----> LS: $LS"

# echo "Update Salesforce CLI"
# sfdx update

echo "-----> DONE!  Completed in $(($SECONDS - $START_TIME))s"

# exit 0